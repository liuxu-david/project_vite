{"version":3,"file":"index-4dqT1ODv.js","sources":["../../src/views/refresh/index.vue"],"sourcesContent":["<script setup>\nimport { computed, ref } from 'vue';\n\nconst page = ref(1);\nconst pageSize = 10;\nconst pageItem = 30;\nconst dataRef = ref(null);\nconst data = [];\nfor (let i = 1; i < 200; i++) {\n  data.push({ id: i, content: '数据' + i });\n}\n\nconst dataResult = computed(() => {\n  return data.slice(0, page.value * pageSize);\n});\n\nconst handleScroll = () => {\n  const scrollTop = dataRef.value.scrollTop;\n  const boxHeight = dataRef.value.offsetHeight;\n  console.log(scrollTop, boxHeight);\n  if (scrollTop >= pageItem * pageSize * page.value - boxHeight + 10) {\n    page.value++;\n    console.log('加载更多数据');\n  }\n};\n</script>\n\n<template>\n  <div class=\"bigbox\" @scroll=\"handleScroll\" ref=\"dataRef\">\n    <div :style=\"{ height: `${dataResult.length * pageItem + 22}px` }\">\n      <div class=\"data_item\" v-for=\"item in dataResult\" :key=\"item\">{{ item.content }}</div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"less\" scoped>\n.bigbox {\n  width: 320px;\n  height: 320px;\n  border: 1px solid red;\n  overflow-y: scroll;\n\n  .data_item {\n    width: 300px;\n    height: 30px;\n    border: 1px solid green;\n    list-style: none;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n}\n</style>\n"],"names":["pageSize","pageItem","page","ref","dataRef","data","i","dataResult","computed","handleScroll","scrollTop","boxHeight"],"mappings":"kGAIA,MAAMA,EAAW,GACXC,EAAW,8BAFjB,MAAMC,EAAOC,EAAI,CAAC,EAGZC,EAAUD,EAAI,IAAI,EAClBE,EAAO,CAAA,EACb,QAASC,EAAI,EAAGA,EAAI,IAAKA,IACvBD,EAAK,KAAK,CAAE,GAAIC,EAAG,QAAS,KAAOA,CAAC,CAAE,EAGxC,MAAMC,EAAaC,EAAS,IACnBH,EAAK,MAAM,EAAGH,EAAK,MAAQF,CAAQ,CAC3C,EAEKS,EAAe,IAAM,CACzB,MAAMC,EAAYN,EAAQ,MAAM,UAC1BO,EAAYP,EAAQ,MAAM,aAChC,QAAQ,IAAIM,EAAWC,CAAS,EAC5BD,GAAaT,EAAWD,EAAWE,EAAK,MAAQS,EAAY,KAC9DT,EAAK,QACL,QAAQ,IAAI,QAAQ,EAExB"}